
<form [formGroup]="form" (ngSubmit)="onSubmit()"> 
  <div id="form1">
    <div class="row" style="padding: 0% 25% 0% 25%;">
      <div class="ribbon-pop p-3 text-center fs-5" style="font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;font-weight: 600;font-size:21px;">Add Debit Location</div>
      <div class="col-md-12">
        <div class="card p-3">
          <div class="col-md-12">
            <div class="row g-3 justify-content-center">
              <div class="col-md-6 mx-auto">
              <label for="DBTLocnSttnFrm" class="form-label text-primary-emphasis fw-semibold">
                <i class="bi bi-pin-map-fill text-primary-emphasis me-1"></i>Station From<span class="text-danger"> *</span>
              </label>
              <input type="text" class="form-control border border-light rounded-3 shadow-sm bg-light" formControlName="DBTLocnSttnFrm" id="DBTLocnSttnFrm" name="DBTLocnSttnFrm" placeholder="Enter station">
              </div>

              <div class="col-md-6 mx-auto">
              <label for="DBTLocnCurrentDate" class="form-label text-primary-emphasis fw-semibold">
                <i class="bi bi-box-fill text-primary-emphasis me-1"></i>Date
              </label>
              <input type="date" class="form-control border border-light rounded-3 shadow-sm bg-light" formControlName="DBTLocnCurrentDate" id="DBTLocnCurrentDate" name="DBTLocnCurrentDate" >
              </div>
            </div>

            <div class="row g-3 mt-2 justify-content-center">

              <div class="col-md mx-auto">
                <label for="DBTLocnlistCPDA" class="form-label text-primary-emphasis fw-semibold">
                  <i class="bi bi-pin-map-fill text-primary-emphasis me-1"></i>List of CPDA<span class="text-danger"> *</span>
                </label>
                <select class="form-select border border-light rounded-3 shadow-sm bg-light" formControlName="DBTLocnlistCPDA" id="DBTLocnlistCPDA" name="DBTLocnlistCPDA">
                  <option value="" disabled selected>Select a CPDA</option>
                  <option value="cpda1">XYZ CPDA 1</option>
                  <option value="cpda2">XYZ CPDA 2</option>
                  <option value="cpda3">XYZ CPDA 3</option>
                </select>
              </div>

              <div class="col-md mx-auto">
                <label for="DBTLocnlistLocns" class="form-label text-primary-emphasis fw-semibold">
                  <i class="bi bi-pin-map-fill text-primary-emphasis me-1"></i>List of Locations<span class="text-danger"> *</span>
                </label>
                <select class="form-select border border-light rounded-3 shadow-sm bg-light" formControlName="DBTLocnlistLocns" id="DBTLocnlistLocns" name="DBTLocnlistLocns">
                  <option value="" disabled selected>Select a location</option>
                  <option value="location1">XYZ Location 1</option>
                  <option value="location2">XYZ Location 2</option>
                  <option value="location3">XYZ Location 3</option>
                </select>
              </div>

              <div class="col-md mx-auto">
                <label for="DBTLocncustCode" class="form-label text-primary-emphasis fw-semibold">
                  <i class="bi bi-person-fill text-primary-emphasis me-1"></i>Customer Code<span class="text-danger"> *</span>
                </label>
                <select class="form-select border border-light rounded-3 shadow-sm bg-light" formControlName="DBTLocncustCode" id="DBTLocncustCode" name="DBTLocncustCode">
                  <option value="" disabled selected>Select a customer code</option>
                  <option value="cust1">XYZ Cust Code 1</option>
                  <option value="cust2">XYZ Cust Code 2</option>
                  <option value="cust3">XYZ Cust Code 3</option>
                </select>
              </div>

              <div class="col-md mx-auto">
              <label for="DBTLocnScustName" class="form-label text-primary-emphasis fw-semibold">
                <i class="bi bi-pin-map-fill text-primary-emphasis me-1"></i>Customer name<span class="text-danger"> *</span>
              </label>
              <input type="text" class="form-control border border-light rounded-3 shadow-sm bg-light" formControlName="DBTLocnScustName" id="DBTLocnScustName" name="DBTLocnScustName" placeholder="Enter station">
              </div>

            </div>

            <div class="row g-3 mt-1 justify-content-center">
  <fieldset class="border rounded-4 shadow-sm bg-light px-3 pt-2 pb-2 w-100 align-self-stretch">
    <legend class="float-none w-auto px-3 text-primary-emphasis fs-6 fw-bold">
      Upload Signed File <span class="text-danger">*</span>
    </legend>

    <!-- File Upload -->
    <div class="text-center mb-3">
      <!-- Hide native input -->
      <input 
        type="file" 
        (change)="onFileSelect($event)" 
        #fileInput
        hidden
      />

      <!-- Styled button -->
      <button 
        type="button" 
        class="btn btn-outline-primary rounded-pill px-4 py-2 shadow-sm fw-semibold"
        (click)="fileInput.click()"
        [disabled]="selectedFile"
      >
        Choose File
      </button>

      <div class="mt-1">
        <small class="text-muted">You can upload only 1 file</small>
      </div>
    </div>

    <!-- Preview Selected File -->
    <div class="text-center" *ngIf="selectedFile">
      <div class="d-inline-flex align-items-center border rounded px-3 py-2 bg-white shadow-sm">
        <i class="bi bi-file-earmark-text me-2 text-primary"></i>
        <span class="fw-semibold small">{{ selectedFile.name }}</span>

        <!-- Remove Button -->
        <button 
          type="button"
          class="btn-close ms-2"
          (click)="removeFile()">
        </button>
      </div>
    </div>
  </fieldset>
</div>

          </div>

          <div class="row mt-3">
            <div class="button-wrapper">
              <button class="btn-modern submit-btn" type="submit">
                <i class="bi bi-check-circle-fill me-2"></i> Submit
              </button>
              <button class="btn-modern reset-btn" type="button" (click)="onCancel()">
                <i class="bi bi-x-circle-fill me-2"></i> Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<!-- Grid Table -->
<div class="container mt-4">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-primary text-white fw-semibold">
      Pending Submitted Requests
    </div>
    <div class="card-body p-0">
      <table class="table table-striped table-hover mb-0 text-center align-middle">
        <thead class="table-light">
          <tr>
            <th>Request Date</th>
            <th>Request ID</th>
            <th>CPDA</th>
            <th>Location</th>
            <th>Customer Code</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let req of requests">
            <td>{{ req.date | date:'dd-MM-yyyy' }}</td>
            <td>{{ req.id }}</td>
            <td>{{ req.cpda }}</td>
            <td>{{ req.location }}</td>
            <td>{{ req.custCode }}</td>
            <td>
              <span [ngClass]="{
                  'text-success fw-semibold': req.status === 'Approved',
                  'text-danger fw-semibold': req.status === 'Rejected',
                  'text-warning fw-semibold': req.status === 'Pending'
              }">
                {{ req.status }}
              </span>
            </td>
          </tr>
          <tr *ngIf="requests.length === 0">
            <td colspan="6" class="text-muted">No requests submitted yet</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

